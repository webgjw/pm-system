import{k as b,o as p,c as q,d as V,e as o,w as r,E as z,g as W,f as e,h as X,i,t as m,j as Y,I as Z,J as ee,M as le,F as U,v as ae,q as _,N as oe,y as h,K as te,O as re,D as de,L as ne,r as D,m as se,P as ue,Q as pe}from"./index-DHRVARTs.js";/* empty css                  *//* empty css                 *//* empty css                     */import{l as ie,r as me,u as ce,s as fe,a as _e}from"./app-resource-mVb3wR_5.js";import{u as ye}from"./use-table-handlers-Dxt4lftd.js";const be={class:"main-body"},Ve={class:"toolbar"},he={class:"dialog-footer"},we={__name:"Resource",setup(ge){const g=b(["folder","menu","button"]),c=D({name:""}),t=D({id:"",type:0,name:"",displayName:"",parentId:null,url:"",orderNum:0,icon:""}),{t:l,tableRef:I,dialogVisible:y,isEdit:N,formRef:T,doSearch:B,doAdd:F,doEdit:H,doSubmit:S,doClose:k,doRemove:x}=ye(t),E=b([]),P=se(()=>[{prop:"id",label:l("thead.ID")},{prop:"name",label:l("thead.name")},{prop:"displayName",label:l("thead.displayName")},{prop:"icon",label:l("thead.icon")},{prop:"type",label:l("thead.type"),formatter:s=>{const a=s.type;return ue(pe,{type:{1:"success",2:"info"}[a]||""},()=>l(`status.${g.value[a]}`))}},{prop:"url",label:l("thead.url"),showOverflowTooltip:!0},{prop:"orderNum",label:l("thead.orderNum")}]),K=b({name:[{required:!0,message:l("form.nameRequired"),trigger:"blur"}],displayName:[{required:!0,message:l("form.displayNameRequired"),trigger:"blur"}],url:[{required:!0,message:l("form.urlRequired"),trigger:"blur"}]}),R=()=>{_e().then(s=>{E.value=s.data})};function L(){R(),F()}function M(s){R(),H(s)}function A(s,a){x(me,s,a)}function v(){S({save:fe,update:ce})}return(s,a)=>{const u=W,n=z,f=X,C=Y,O=Z,$=oe,j=le,G=te,J=re,Q=ne;return p(),q(U,null,[V("div",be,[V("div",Ve,[o(C,{inline:!0,model:e(c)},{default:r(()=>[o(n,null,{default:r(()=>[o(u,{modelValue:e(c).title,"onUpdate:modelValue":a[0]||(a[0]=d=>e(c).title=d),placeholder:e(l)("thead.title")},null,8,["modelValue","placeholder"])]),_:1}),o(n,null,{default:r(()=>[o(f,{icon:"search",type:"primary",onClick:e(B)},{default:r(()=>[i(m(e(l)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),o(n,null,{default:r(()=>[o(f,{icon:"plus",type:"primary",onClick:L},{default:r(()=>[i(m(e(l)("action.add")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),o(O,{"row-key":"id",ref_key:"tableRef",ref:I,"get-page":e(ie),filters:e(c),columns:e(P),showBatchDelete:!1,showPagination:!1,onHandleEdit:M,onHandleDelete:A},null,8,["get-page","filters","columns"])]),o(Q,{title:e(N)?e(l)("action.edit"):e(l)("action.add"),width:"40%",draggable:"",modelValue:e(y),"onUpdate:modelValue":a[8]||(a[8]=d=>de(y)?y.value=d:null),"close-on-click-modal":!1,onClose:e(k)},{footer:r(()=>[V("span",he,[o(f,{onClick:e(k)},{default:r(()=>[i(m(e(l)("action.cancel")),1)]),_:1},8,["onClick"]),o(f,{type:"primary",onClick:v},{default:r(()=>[i(m(e(l)("action.confirm")),1)]),_:1})])]),default:r(()=>[o(C,{model:e(t),rules:e(K),ref_key:"formRef",ref:T,onKeyup:ee(v,["enter"]),"label-width":"80px"},{default:r(()=>[o(n,{label:e(l)("thead.type"),prop:"type"},{default:r(()=>[o(j,{modelValue:e(t).type,"onUpdate:modelValue":a[1]||(a[1]=d=>e(t).type=d),disabled:e(N)},{default:r(()=>[(p(!0),q(U,null,ae(e(g),(d,w)=>(p(),_($,{label:w,key:w},{default:r(()=>[i(m(e(l)(`status.${d}`)),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),o(n,{label:e(l)("thead.name"),prop:"name"},{default:r(()=>[o(u,{modelValue:e(t).name,"onUpdate:modelValue":a[2]||(a[2]=d=>e(t).name=d),placeholder:e(l)("form.nameRequired")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(n,{label:e(l)("thead.displayName"),prop:"displayName"},{default:r(()=>[o(u,{modelValue:e(t).displayName,"onUpdate:modelValue":a[3]||(a[3]=d=>e(t).displayName=d),placeHolder:e(l)("form.displayNameRequired")},null,8,["modelValue","placeHolder"])]),_:1},8,["label"]),e(t).type!==2?(p(),_(n,{key:0,label:e(l)("thead.icon")},{default:r(()=>[o(u,{modelValue:e(t).icon,"onUpdate:modelValue":a[4]||(a[4]=d=>e(t).icon=d),placeholder:e(l)("thead.icon")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):h("",!0),o(n,{label:e(l)("form.parent")},{default:r(()=>[o(G,{modelValue:e(t).parentId,"onUpdate:modelValue":a[5]||(a[5]=d=>e(t).parentId=d),props:{label:"displayName",value:"id",checkStrictly:!0,emitPath:!1},options:e(E),class:"w100p"},null,8,["modelValue","options"])]),_:1},8,["label"]),e(t).type===1?(p(),_(n,{key:1,label:e(l)("thead.url"),prop:e(t).type===1?"url":""},{default:r(()=>[o(u,{modelValue:e(t).url,"onUpdate:modelValue":a[6]||(a[6]=d=>e(t).url=d),placeholder:e(l)("thead.url")},null,8,["modelValue","placeholder"])]),_:1},8,["label","prop"])):h("",!0),e(t).type!==2?(p(),_(n,{key:2,label:e(l)("thead.orderNum"),prop:e(t).type!==2?"orderNum":""},{default:r(()=>[o(J,{modelValue:e(t).orderNum,"onUpdate:modelValue":a[7]||(a[7]=d=>e(t).orderNum=d),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1},8,["label","prop"])):h("",!0)]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{we as default};

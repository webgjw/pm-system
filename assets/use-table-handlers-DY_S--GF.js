import{a as b,k as l,A as y}from"./index-BmeCGnl5.js";function S(s){const{t:c}=b(),o=l(),n=l(!1),a=l(!1),i=l(!1),u=l(),f={...s},g=()=>{o.value.reload()},h=()=>{n.value=!0,a.value=!1,u.value&&u.value.clearValidate()},p=e=>{if(s){a.value=!0,n.value=!0;for(const t in s)t in e&&(s[t]=e[t])}},R=()=>{const e={...s};return a.value||delete e.id,e},_=(e,t)=>{!s||!e||u.value.validate(r=>{if(r){i.value=!0;let d;const m=e.getParams?e.getParams():R();a.value?d=e.update(m):d=e.save(m),d.then(P=>{t?t(P):y({message:c("tips.success"),type:"success",showClose:!0}),v(),a.value?o.value.refresh():o.value.reload()}).finally(()=>{i.value=!1})}})},E=()=>{if(s)for(const e in f)s[e]=f[e]};function v(){n.value=!1,E()}return{t:c,tableRef:o,dialogVisible:n,isEdit:a,formLoading:i,formRef:u,doSearch:g,doAdd:h,doEdit:p,doSubmit:_,doClose:v,doRemove:(e,t,r)=>{e({id:t}).then(()=>{r&&r()})}}}export{S as u};

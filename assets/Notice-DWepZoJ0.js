import{H as f,o as N,c as L,d as y,e as l,w as o,E as O,g as $,f as e,h as j,i as c,t as p,j as A,I as z,S as G,D as J,L as K,F as M,r as V,m as E}from"./index-CwW9_Dy-.js";/* empty css                  *//* empty css                  *//* empty css                     */import{u as Q}from"./use-table-handlers-DSYfUArO.js";const X=a=>f({url:"sys/notice/listPage",method:"get",data:a}),Y=a=>f({url:"sys/notice/save",method:"post",data:a}),Z=a=>{const{id:s}=a;return delete a.id,f({url:`sys/notice/update/${s}`,method:"post",data:a})},ee=a=>f({url:"sys/notice/delete",method:"post",data:a}),te={class:"main-body"},le={class:"toolbar"},se={__name:"Notice",setup(a){const s=V({title:""}),r=V({id:"",title:"",content:"",isPublish:!1}),{t,tableRef:k,dialogVisible:_,isEdit:w,formLoading:C,formRef:v,doSearch:T,doAdd:R,doEdit:x,doSubmit:B,doClose:b,doRemove:D}=Q(r),S=[{type:"edit",disabled:u=>!!u.publishTime},{type:"delete"}],W=E(()=>[{type:"selection"},{prop:"id",label:t("thead.ID"),minWidth:50},{prop:"title",label:t("thead.title"),minWidth:120,showOverflowTooltip:!0},{prop:"content",label:t("thead.content"),minWidth:120,showOverflowTooltip:!0},{prop:"publishTime",label:t("thead.publishTime"),minWidth:120},{prop:"createdTime",label:t("thead.createdTime"),minWidth:120},{prop:"createdBy",label:t("thead.createdBy"),minWidth:120}]),q=E(()=>({title:[{required:!0,message:t("form.titleRequired"),trigger:["blur","change"]},{min:2,max:60,message:t("form.titleError"),trigger:["blur","change"]}],content:[{required:!0,message:t("form.contentRequired"),trigger:["blur","change"]},{min:2,max:300,message:t("form.contentError"),trigger:["blur","change"]}]}));function H(u,n){D(ee,u,n)}function P(){B({save:Y,update:Z})}return(u,n)=>{const h=$,d=O,m=j,g=A,U=z,F=G,I=K;return N(),L(M,null,[y("div",te,[y("div",le,[l(g,{inline:!0,model:e(s)},{default:o(()=>[l(d,null,{default:o(()=>[l(h,{modelValue:e(s).title,"onUpdate:modelValue":n[0]||(n[0]=i=>e(s).title=i),placeholder:e(t)("thead.title")},null,8,["modelValue","placeholder"])]),_:1}),l(d,null,{default:o(()=>[l(m,{icon:"search",type:"primary",onClick:e(T)},{default:o(()=>[c(p(e(t)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(d,null,{default:o(()=>[l(m,{icon:"plus",type:"primary",onClick:e(R)},{default:o(()=>[c(p(e(t)("action.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l(U,{ref_key:"tableRef",ref:k,"get-page":e(X),filters:e(s),columns:e(W),operations:S,onHandleEdit:e(x),onHandleDelete:H},null,8,["get-page","filters","columns","onHandleEdit"])]),l(I,{title:e(w)?e(t)("action.edit"):e(t)("action.add"),modelValue:e(_),"onUpdate:modelValue":n[4]||(n[4]=i=>J(_)?_.value=i:null),draggable:"",width:"40%","close-on-click-modal":!1,onClose:e(b)},{footer:o(()=>[l(m,{onClick:e(b)},{default:o(()=>[c(p(e(t)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",loading:e(C),onClick:P},{default:o(()=>[c(p(e(t)("action.submit")),1)]),_:1},8,["loading"])]),default:o(()=>[l(g,{ref_key:"formRef",ref:v,model:e(r),rules:e(q),"label-width":"80px","label-position":"right"},{default:o(()=>[l(d,{label:e(t)("thead.title"),prop:"title"},{default:o(()=>[l(h,{modelValue:e(r).title,"onUpdate:modelValue":n[1]||(n[1]=i=>e(r).title=i)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e(t)("thead.content"),prop:"content"},{default:o(()=>[l(h,{type:"textarea",modelValue:e(r).content,"onUpdate:modelValue":n[2]||(n[2]=i=>e(r).content=i),"words-limit":300},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:u.$("form.publish")},{default:o(()=>[l(F,{modelValue:e(r).isPublish,"onUpdate:modelValue":n[3]||(n[3]=i=>e(r).isPublish=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{se as default};

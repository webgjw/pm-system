import{o as z,c as G,d as _,e as a,w as t,E as J,g as Q,f as e,h as X,i as u,t as m,j as Y,I as Z,D as E,L as ee,R as le,F as ae,r as T,k as p,m as B,A as te}from"./index-CwW9_Dy-.js";/* empty css                  *//* empty css                     */import{l as oe,r as ne,u as de,s as se,b as ie}from"./app-role-B7vnU044.js";import{l as re}from"./app-resource-CXESUJu1.js";import{u as ue}from"./use-table-handlers-DSYfUArO.js";const me={class:"main-body"},ce={class:"toolbar"},pe={class:"dialog-footer"},fe={class:"dialog-footer"},Ve={__name:"Role",setup(_e){const f=T({name:""}),k=p([]),s=p(!1),y=p([]),b=p(!1),v=p(),w=[{type:"edit"},{label:l("action.bindResource"),onClick:K},{type:"delete"}],i=T({id:"",name:"",remark:""}),{t:l,tableRef:x,dialogVisible:g,isEdit:D,formLoading:U,formRef:W,doSearch:I,doAdd:N,doEdit:S,doSubmit:F,doClose:V,doRemove:H}=ue(i),L=B(()=>[{type:"selection"},{prop:"id",label:l("thead.ID"),minWidth:50},{prop:"name",label:l("thead.roleName"),minWidth:120},{prop:"remark",label:l("thead.remark"),minWidth:120,showOverflowTooltip:!0},{prop:"createdBy",label:l("thead.createdBy"),minWidth:120},{prop:"createdTime",label:l("thead.createdTime"),minWidth:160},{prop:"lastUpdateBy",label:l("thead.updatedBy"),minWidth:120},{prop:"lastUpdateTime",label:l("thead.updatedTime"),minWidth:160}]),q=B(()=>({name:[{required:!0,message:l("form.nameRequired"),trigger:["blur","change"]}]}));function A(d,o){H(ne,d,o)}function K(d){s.value=!0,j(),y.value=d.resourceIds?d.resourceIds.split(","):[]}function j(){re().then(d=>{k.value=d.data})}function M(){b.value=!0,ie({ids:v.value.getCheckedKeys().toString()}).then(()=>{te({message:l("tip.success"),type:"success",showClose:!0}),s.value=!1}).finally(()=>{b.value=!1})}function O(){F({save:se,update:de})}return(d,o)=>{const h=Q,c=J,r=X,C=Y,P=Z,R=ee,$=le;return z(),G(ae,null,[_("div",me,[_("div",ce,[a(C,{inline:!0,model:e(f)},{default:t(()=>[a(c,null,{default:t(()=>[a(h,{modelValue:e(f).name,"onUpdate:modelValue":o[0]||(o[0]=n=>e(f).name=n),placeholder:e(l)("thead.username")},null,8,["modelValue","placeholder"])]),_:1}),a(c,null,{default:t(()=>[a(r,{icon:"search",type:"primary",onClick:e(I)},{default:t(()=>[u(m(e(l)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),a(c,null,{default:t(()=>[a(r,{icon:"plus",type:"primary",onClick:e(N)},{default:t(()=>[u(m(e(l)("action.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),a(P,{ref_key:"tableRef",ref:x,"get-page":e(oe),filters:e(f),columns:e(L),operations:w,onHandleEdit:e(S),onHandleDelete:A},null,8,["get-page","filters","columns","onHandleEdit"])]),a(R,{title:e(D)?e(l)("action.edit"):e(l)("action.add"),width:"40%",draggable:"",modelValue:e(g),"onUpdate:modelValue":o[3]||(o[3]=n=>E(g)?g.value=n:null),"close-on-click-modal":!1,onClose:e(V)},{footer:t(()=>[_("div",pe,[a(r,{onClick:e(V)},{default:t(()=>[u(m(e(l)("action.cancel")),1)]),_:1},8,["onClick"]),a(r,{type:"primary",onClick:O,loading:e(U)},{default:t(()=>[u(m(e(l)("action.submit")),1)]),_:1},8,["loading"])])]),default:t(()=>[a(C,{ref_key:"formRef",ref:W,model:e(i),"label-width":"80px",rules:e(q)},{default:t(()=>[a(c,{label:e(l)("thead.roleName"),prop:"name"},{default:t(()=>[a(h,{modelValue:e(i).name,"onUpdate:modelValue":o[1]||(o[1]=n=>e(i).name=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{label:e(l)("thead.remark"),prop:"remark"},{default:t(()=>[a(h,{modelValue:e(i).remark,"onUpdate:modelValue":o[2]||(o[2]=n=>e(i).remark=n),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"]),a(R,{title:e(l)("action.bindResource"),width:"40%",draggable:"",modelValue:e(s),"onUpdate:modelValue":o[5]||(o[5]=n=>E(s)?s.value=n:null),"close-on-click-modal":!1},{footer:t(()=>[_("div",fe,[a(r,{onClick:o[4]||(o[4]=n=>s.value=!1)},{default:t(()=>[u(m(e(l)("action.cancel")),1)]),_:1}),a(r,{type:"primary",onClick:M,loading:e(b)},{default:t(()=>[u(m(e(l)("action.submit")),1)]),_:1},8,["loading"])])]),default:t(()=>[a($,{ref_key:"treeRef",ref:v,"node-key":"id",data:e(k),"show-checkbox":"","default-expand-all":"","default-checked-keys":e(y),props:{label:"displayName"}},null,8,["data","default-checked-keys"])]),_:1},8,["title","modelValue"])],64)}}};export{Ve as default};

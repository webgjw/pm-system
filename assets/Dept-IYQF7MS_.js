import{H as u,o as P,c as W,d as E,e as l,w as a,E as $,g as j,f as e,h as J,i as c,t as f,j as L,I as z,J as G,K as M,D as Q,L as X,F as Y,r as B,m as C,k as Z}from"./index-CwW9_Dy-.js";/* empty css                  *//* empty css                 *//* empty css                     */import{u as ee}from"./use-table-handlers-DSYfUArO.js";const te=()=>u({url:"app/dept/listTree",method:"get"}),le=o=>u({url:"app/dept/listOtherTreeById",method:"post",data:o}),ae=o=>u({url:"app/dept/save",method:"post",data:o}),oe=o=>{const{id:d}=o;return delete o.id,u({url:`app/dept/update/${d}`,method:"post",data:o})},ne=o=>{const{id:d}=o;return delete o.id,u({url:`app/dept/delete/${d}`,method:"post",data:o})},de={class:"main-body"},re={class:"toolbar"},ce={__name:"Dept",setup(o){const d=B({title:""}),i=B({id:"",name:"",parentId:null}),{t,tableRef:v,dialogVisible:_,isEdit:I,formRef:T,doSearch:D,doAdd:w,doEdit:R,doSubmit:U,doClose:h,doRemove:x}=ee(),b=Z([]),F=C(()=>[{prop:"id",label:t("thead.ID")},{prop:"name",label:t("thead.name")},{prop:"createdBy",label:t("thead.createdBy")},{prop:"createdTime",label:t("thead.createdTime"),minWidth:160},{prop:"lastUpdateBy",label:t("thead.updatedBy")},{prop:"lastUpdateTime",label:t("thead.updatedTime"),minWidth:160}]),H=C(()=>({name:[{required:!0,message:t("form.usernameHolder"),trigger:["change","blur"]}]}));function y(r){le(r?{id:r.id}:null).then(n=>{b.value=n.data})}function S(){y(),w()}function q(r){y(r),R(r)}function K(r,n){x(ne,r,n)}function g(){U({save:ae,update:oe})}return(r,n)=>{const V=j,p=$,m=J,k=L,N=z,A=M,O=X;return P(),W(Y,null,[E("div",de,[E("div",re,[l(k,{inline:!0,model:e(d)},{default:a(()=>[l(p,null,{default:a(()=>[l(V,{modelValue:e(d).title,"onUpdate:modelValue":n[0]||(n[0]=s=>e(d).title=s),placeholder:e(t)("thead.title")},null,8,["modelValue","placeholder"])]),_:1}),l(p,null,{default:a(()=>[l(m,{icon:"search",type:"primary",onClick:e(D)},{default:a(()=>[c(f(e(t)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(p,null,{default:a(()=>[l(m,{icon:"plus",type:"primary",onClick:S},{default:a(()=>[c(f(e(t)("action.add")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),l(N,{"row-key":"id",ref_key:"tableRef",ref:v,"get-page":e(te),filters:e(d),columns:e(F),showBatchDelete:!1,showPagination:!1,onHandleEdit:q,onHandleDelete:K},null,8,["get-page","filters","columns"])]),l(O,{title:e(I)?e(t)("action.edit"):e(t)("action.add"),width:"40%",draggable:"",modelValue:e(_),"onUpdate:modelValue":n[3]||(n[3]=s=>Q(_)?_.value=s:null),"close-on-click-model":!1,onClose:e(h)},{footer:a(()=>[l(m,{onClick:e(h)},{default:a(()=>[c(f(e(t)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",onClick:g},{default:a(()=>[c(f(e(t)("action.confirm")),1)]),_:1})]),default:a(()=>[l(k,{model:e(i),rules:e(H),ref_key:"formRef",ref:T,onKeyup:G(g,["enter"]),"label-width":"80px"},{default:a(()=>[l(p,{label:e(t)("thead.name"),prop:"name"},{default:a(()=>[l(V,{modelValue:e(i).name,"onUpdate:modelValue":n[1]||(n[1]=s=>e(i).name=s),placeholder:e(t)("thead.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(p,{label:e(t)("form.parent"),prop:"parentId"},{default:a(()=>[l(A,{modelValue:e(i).parentId,"onUpdate:modelValue":n[2]||(n[2]=s=>e(i).parentId=s),props:{label:"name",value:"id",checkStrictly:!0,emitPath:!1},options:e(b),clearable:"",filterable:"",class:"w100p"},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{ce as default};
